<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>David Gilmour Management - Fan Connect</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      color: white;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    .container {
      padding: 20px;
    }
    .step {
      display: none;
      margin: 20px auto;
      padding: 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      max-width: 600px;
    }
    button {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 10px 20px;
      margin: 10px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      background: #45a049;
    }
    input, textarea {
      padding: 10px;
      margin: 10px;
      width: 80%;
      border-radius: 8px;
      border: none;
    }
    .wallet {
      background: rgba(0,0,0,0.3);
      padding: 10px;
      border-radius: 8px;
      margin: 10px auto;
      width: 80%;
      word-wrap: break-word;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Welcome to David Gilmour Management Fan Connect</h1>

    <!-- Step 1 -->
    <div id="step1" class="step">
      <h2>Step 1: Start Live Chat</h2>
      <p>Click below to chat directly with management for 5 minutes (free trial).</p>
      <button onclick="startShortChat()">Start Live Chat</button>
      <p><em>After 5 minutes, reload this page to continue to Step 2.</em></p>
    </div>

    <!-- Step 2 -->
    <div id="step2" class="step">
      <h2>Step 2: Enter Management Code</h2>
      <input type="text" id="managementCode" placeholder="Enter management code">
      <button onclick="verifyCode()">Submit Code</button>
      <p id="codeMessage"></p>
    </div>

    <!-- Step 3 -->
    <div id="step3" class="step">
      <h2>Step 3: Make Payment</h2>
      <p>Select your desired option and pay using the wallet addresses below:</p>
      <ul style="text-align:left; display:inline-block;">
        <li>30 minutes chat → <b>$100</b></li>
        <li>1 hour 30 minutes chat → <b>$250</b></li>
        <li>Voice/Video call → <b>$1,000</b></li>
      </ul>
      <div class="wallet">
        <p><b>Bitcoin (BTC):</b> bc1ql35qu8wzlpc5cs5d7hgtk5srep48f7j0x27yr0 <button onclick="copyWallet('bc1ql35qu8wzlpc5cs5d7hgtk5srep48f7j0x27yr0')">Copy</button></p>
        <p><b>Tron (TRX):</b> TVEKPhAMmXQwC7GR95UJrDV8DEboUHJBYW <button onclick="copyWallet('TVEKPhAMmXQwC7GR95UJrDV8DEboUHJBYW')">Copy</button></p>
      </div>
      <button onclick="confirmPayment()">I Have Made Payment</button>
    </div>

    <!-- Step 4 -->
    <div id="step4" class="step">
      <h2>Step 4: Submit Your Details</h2>
      <textarea id="userDetails" placeholder="Enter your payment details (transaction ID, wallet address, etc.)"></textarea><br>
      <button onclick="submitDetails()">Submit Details</button>
    </div>

    <!-- Step 5 -->
    <div id="step5" class="step">
      <h2>Step 5: Access Granted</h2>
      <p>Thank you! Management will now grant you access. You can continue chatting via the chat bubble.</p>
    </div>
  </div>

  <script>
    function showStep(id) {
      document.querySelectorAll('.step').forEach(step => step.style.display = 'none');
      document.getElementById(id).style.display = 'block';
    }

    function startShortChat() {
      localStorage.setItem("shortChatStartTime", Date.now());
      localStorage.setItem("shortChatEnded", "false");
      alert("Live chat started! Use the green bubble below to chat with management.");
    }

    function checkStepProgress() {
      const startTime = localStorage.getItem("shortChatStartTime");

      if (startTime) {
        const elapsed = Date.now() - parseInt(startTime);
        if (elapsed >= 5 * 60 * 1000) {
          localStorage.setItem("shortChatEnded", "true");
        }
      }

      if (localStorage.getItem("shortChatEnded") === "true") {
        if (localStorage.getItem("managementCodeVerified") === "true") {
          if (localStorage.getItem("paymentDone") === "true") {
            if (localStorage.getItem("detailsSubmitted") === "true") {
              showStep("step5");
              if (window.Tawk_API) Tawk_API.showWidget();
            } else {
              showStep("step4");
            }
          } else {
            showStep("step3");
          }
        } else {
          showStep("step2");
        }
      } else {
        showStep("step1");
      }
    }

    function verifyCode() {
      const code = document.getElementById("managementCode").value;
      if (code === "DG2025") {
        localStorage.setItem("managementCodeVerified", "true");
        document.getElementById("codeMessage").innerText = "Code accepted! Reloading...";
        setTimeout(() => location.reload(), 1000);
      } else {
        document.getElementById("codeMessage").innerText = "Invalid code.";
      }
    }

    function confirmPayment() {
      localStorage.setItem("paymentDone", "true");
      location.reload();
    }

    function submitDetails() {
      localStorage.setItem("detailsSubmitted", "true");
      location.reload();
    }

    function copyWallet(address) {
      navigator.clipboard.writeText(address).then(() => alert("Wallet address copied!"));
    }

    window.onload = checkStepProgress;
  </script>

  <!--Start of Tawk.to Script-->
  <script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
      var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
      s1.async=true;
      s1.src='https://embed.tawk.to/68a0948fa4fc79192a7c8dc2/1j2pk8kgl';
      s1.charset='UTF-8';
      s1.setAttribute('crossorigin','*');
      s0.parentNode.insertBefore(s1,s0);
    })();

    // Show widget initially (so fans can start short chat)
    Tawk_API.onLoad = function(){
        Tawk_API.showWidget();
    };
  </script>
  <!--End of Tawk.to Script-->
</body>
</html>
